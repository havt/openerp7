<openerp>
    <data>
			
		<record model="ir.ui.view" id="kderp_stock_picking_in_tree">
             <field name="name">stock.picking.in.tree.view</field>
             <field name="model">stock.picking.in</field>
             <field name="type">tree</field>
             <field eval="5" name="priority"/>
             <field name="arch" type="xml">
                 <tree string="Stock Picking" colors="blue:state=='draft';red:state=='red';">
                     <field name="name" string="Packing No."/>
                     <field name="purchase_id"/>
                     <field name="partner_id"/>
                     <field name="location_dest_id"/>
                     <field name="date"/>
                     <field name="min_date"/>
                     <field name="date_done"/>
                     <field name="origin" string='Ref. No.'/>
                     <field name="state"/>
                 </tree>
             </field>
        </record>
    
		<record model="ir.ui.view" id="kderp_stock_picking_in_form">
			<field name="name">stock.picking.in.form.view</field>
			<field name="model">stock.picking.in</field>
			<field name="type">form</field>
			<field eval="5" name="priority"/>
			<field name="arch" type="xml">
				<form string="Stock Picking" version="7.0">
              		<header>
              			<field name='state' widget='statusbar' statusbar_visible='draft,done,done,assigned' statusbar_color="{'draft':'blue','cancel':'red'}" readonly="1"/>
              		</header>
              		<sheet>              		
              			<group string="Packing Info." col="4">
							<field name="name" string="Packing No."/>
							<field name="purchase_id"/>
							<field name="partner_id"/>
							<field name="origin" string='Ref. No.'/>
							<field name="location_id"/>
							<field name="location_dest_id"/>
						</group>
						<group string='Date Info.' col="4">
							<field name="date"/>
							<field name="date_done"/>
							<field name="min_date"/>
						</group>
						<notebook>
							<page string="Details">
								<field name="move_lines" colspan="4" nolabel="1"/>
							</page>
							<page string='Notes'>
								<field name="note"/>
							</page>
						</notebook>
					</sheet>						
              </form>
          </field>
		</record>		
		
		<!-- FIXME: Later will remove -->
        <record id="view_kderp_picking_in_form_2" model="ir.ui.view">
            <field name="name">kderp.stock.picking.in.form</field>
            <field name="model">stock.picking</field>
            <field eval="10" name="priority"/>
            <field name="arch" type="xml">             
                <form string="Input Packing List" version="7.0">
                	<group strig='Packing Info.'>
						<field name="purchase_id" string="PO No." required="1" select="1"/> 
						<field name="origin" select="2" string="Original Ref."/>
						<field name="name" select="1" string="Packing No."/>
						<field name="date_done" select="1"/>
						<field colspan="4" name="note" string="Description"/>
					</group>
                   	<field colspan="4" context="{'order_id':purchase_id}" name="move_lines" nolabel="1" widget="one2many_list">
                       <tree editable="top" string="Packing Detail" limit="10" min_rows="10">
                           	<field colspan="4" name="product_id" select="1"/>
							<field name="purchase_line_id" string="Desc." domain="[('order_id','=',parent.purchase_id)]" on_change="purchase_order_line_change(purchase_line_id)" required="1" select="1"/>
                           	<field name="product_qty" select="1" string="Qty."/>
                           	<field name="product_uom" select="1" string="Unit"/>
                           	<field name="state" invisible="1" string="State"/>
                       </tree>
                   </field>                   
                   <group col="10" colspan="4">
                       <field name="state" readonly="1" string="Status"/>
                       	<button name="update_stock_received" states="draft" string="Received" type="object"/>
                       	<button name="update_stock_draft" states="done" string="Back" type="object"/>
                   </group>
                </form>   
            </field>
        </record>        
    
		<record id="act_kderp_stock_picking_in" model="ir.actions.act_window">
            <field name="name">Packing In</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.picking.in</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('type','=','in')]</field>
            <field name="filter" eval="True"/>
        </record>
        
		<record model='ir.actions.act_window.view' id="action_windows_picking_in_form_view">
			<field name="sequence" eval="10"/>
			<field name="view_id" ref="kderp_stock_picking_in_form"/>
			<field name="view_mode">form</field>
			<field name="act_window_id" ref="act_kderp_stock_picking_in"/>
		</record>
		
		<record model="ir.actions.act_window.view" id="action_windows_picking_in_tree_view">
			<field name="sequence" eval="5"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="kderp_stock_picking_in_tree"/>
			<field name="act_window_id" ref="act_kderp_stock_picking_in"/>
		</record>
                     
        <menuitem 
        			action="act_kderp_stock_picking_in" 
        			id="kderp_stock_picking_menu_in" 
        			parent="menu_kderp_stock_receive_delivery" sequence="1"/>
               
    </data>
</openerp>
